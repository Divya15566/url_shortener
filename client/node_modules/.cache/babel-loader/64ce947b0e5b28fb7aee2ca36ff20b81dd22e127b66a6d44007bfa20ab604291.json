{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// Async thunks\nexport const getMyUrls = createAsyncThunk('url/getMyUrls', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    var _response$data;\n    const {\n      auth\n    } = getState();\n    const response = await axios.get('/api/url/myurls', {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    });\n    return ((_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.data) || [];\n  } catch (err) {\n    var _err$response, _err$response$data, _err$response2, _err$response2$data;\n    toast.error(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to fetch URLs');\n    return rejectWithValue({\n      error: ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || 'Failed to fetch URLs',\n      data: []\n    });\n  }\n});\nexport const shortenUrl = createAsyncThunk('url/shortenUrl', async (urlData, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await axios.post('/api/url/shorten', urlData, {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    });\n    return response.data;\n  } catch (err) {\n    var _err$response3, _err$response3$data, _err$response4;\n    toast.error(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to shorten URL');\n    return rejectWithValue((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data);\n  }\n});\nexport const getAnalytics = createAsyncThunk('url/getAnalytics', async (urlCode, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await axios.get(`/api/analytics/${urlCode}`, {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    });\n    return response.data;\n  } catch (err) {\n    var _err$response5, _err$response5$data, _err$response6;\n    toast.error(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || 'Failed to get analytics');\n    return rejectWithValue((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : _err$response6.data);\n  }\n});\n\n// Async thunk for deleting a URL\nexport const deleteUrl = createAsyncThunk('url/deleteUrl', async (id, {\n  rejectWithValue\n}) => {\n  try {\n    const response = await axios.delete(`/api/url/${id}`);\n    return response.data;\n  } catch (err) {\n    return rejectWithValue(err.response.data);\n  }\n});\n\n// Slice\nconst urlSlice = createSlice({\n  name: 'url',\n  initialState: {\n    urls: [],\n    analytics: null,\n    isLoading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // Get My URLs\n    .addCase(getMyUrls.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getMyUrls.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.urls = Array.isArray(action.payload) ? action.payload : [];\n    }).addCase(getMyUrls.rejected, (state, action) => {\n      var _action$payload;\n      state.isLoading = false;\n      state.error = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.error;\n      state.urls = [];\n    })\n\n    // Shorten URL\n    .addCase(shortenUrl.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(shortenUrl.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.urls.push(action.payload);\n    }).addCase(shortenUrl.rejected, (state, action) => {\n      var _action$payload2;\n      state.isLoading = false;\n      state.error = (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.error;\n    })\n\n    // Get Analytics\n    .addCase(getAnalytics.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getAnalytics.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.analytics = action.payload;\n    }).addCase(getAnalytics.rejected, (state, action) => {\n      var _action$payload3;\n      state.isLoading = false;\n      state.error = (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.error;\n    })\n\n    // Delete URL\n    .addCase(deleteUrl.fulfilled, (state, action) => {\n      state.urls = state.urls.filter(url => url._id !== action.meta.arg);\n    });\n  }\n});\nexport default urlSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","toast","getMyUrls","_","getState","rejectWithValue","_response$data","auth","response","get","headers","Authorization","token","data","err","_err$response","_err$response$data","_err$response2","_err$response2$data","error","shortenUrl","urlData","post","_err$response3","_err$response3$data","_err$response4","getAnalytics","urlCode","_err$response5","_err$response5$data","_err$response6","deleteUrl","id","delete","urlSlice","name","initialState","urls","analytics","isLoading","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","Array","isArray","payload","rejected","_action$payload","push","_action$payload2","_action$payload3","filter","url","_id","meta","arg","reducer"],"sources":["C:/Users/divya/url-shortener/client/src/features/url/urlSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\n// Async thunks\r\nexport const getMyUrls = createAsyncThunk(\r\n  'url/getMyUrls',\r\n  async (_, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { auth } = getState();\r\n      const response = await axios.get('/api/url/myurls', {\r\n        headers: {\r\n          Authorization: `Bearer ${auth.token}`\r\n        }\r\n      });\r\n      return response.data?.data || [];\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.error || 'Failed to fetch URLs');\r\n      return rejectWithValue({\r\n        error: err.response?.data?.error || 'Failed to fetch URLs',\r\n        data: []\r\n      });\r\n    }\r\n  }\r\n);\r\n\r\nexport const shortenUrl = createAsyncThunk(\r\n  'url/shortenUrl',\r\n  async (urlData, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { auth } = getState();\r\n      const response = await axios.post('/api/url/shorten', urlData, {\r\n        headers: {\r\n          Authorization: `Bearer ${auth.token}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.error || 'Failed to shorten URL');\r\n      return rejectWithValue(err.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getAnalytics = createAsyncThunk(\r\n  'url/getAnalytics',\r\n  async (urlCode, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { auth } = getState();\r\n      const response = await axios.get(`/api/analytics/${urlCode}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${auth.token}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.error || 'Failed to get analytics');\r\n      return rejectWithValue(err.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n// Async thunk for deleting a URL\r\nexport const deleteUrl = createAsyncThunk(\r\n  'url/deleteUrl',\r\n  async (id, { rejectWithValue }) => {\r\n    try {\r\n      const response = await axios.delete(`/api/url/${id}`);\r\n      return response.data;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response.data);\r\n    }\r\n  }\r\n);\r\n\r\n// Slice\r\nconst urlSlice = createSlice({\r\n  name: 'url',\r\n  initialState: {\r\n    urls: [],\r\n    analytics: null,\r\n    isLoading: false,\r\n    error: null\r\n  },\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Get My URLs\r\n      .addCase(getMyUrls.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getMyUrls.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.urls = Array.isArray(action.payload) ? action.payload : [];\r\n      })\r\n      .addCase(getMyUrls.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload?.error;\r\n        state.urls = [];\r\n      })\r\n      \r\n      // Shorten URL\r\n      .addCase(shortenUrl.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(shortenUrl.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.urls.push(action.payload);\r\n      })\r\n      .addCase(shortenUrl.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload?.error;\r\n      })\r\n      \r\n      // Get Analytics\r\n      .addCase(getAnalytics.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getAnalytics.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.analytics = action.payload;\r\n      })\r\n      .addCase(getAnalytics.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload?.error;\r\n      })\r\n      \r\n      // Delete URL\r\n      .addCase(deleteUrl.fulfilled, (state, action) => {\r\n        state.urls = state.urls.filter((url) => url._id !== action.meta.arg);\r\n      });\r\n  }\r\n});\r\n\r\nexport default urlSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}