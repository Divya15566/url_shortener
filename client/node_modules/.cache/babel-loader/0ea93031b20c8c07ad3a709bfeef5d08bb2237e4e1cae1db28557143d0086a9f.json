{"ast":null,"code":"import React,{useEffect}from'react';import{useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{getAnalytics}from'../features/url/urlSlice';import{Bar,Line,Pie}from'react-chartjs-2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Analytics(){var _analytics$clicksOver,_analytics$clicksOver2,_analytics$devices,_analytics$devices2,_analytics$url,_analytics$clicks;const{urlCode}=useParams();const dispatch=useDispatch();const{analytics,isLoading}=useSelector(state=>state.url);useEffect(()=>{dispatch(getAnalytics(urlCode));},[dispatch,urlCode]);if(isLoading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading analytics...\"});if(!analytics)return/*#__PURE__*/_jsx(\"div\",{children:\"No analytics data found\"});// Prepare chart data\nconst clicksOverTimeData={labels:((_analytics$clicksOver=analytics.clicksOverTime)===null||_analytics$clicksOver===void 0?void 0:_analytics$clicksOver.map(item=>item._id))||[],datasets:[{label:'Clicks',data:((_analytics$clicksOver2=analytics.clicksOverTime)===null||_analytics$clicksOver2===void 0?void 0:_analytics$clicksOver2.map(item=>item.count))||[],borderColor:'rgb(75, 192, 192)',backgroundColor:'rgba(75, 192, 192, 0.2)'}]};const devicesData={labels:((_analytics$devices=analytics.devices)===null||_analytics$devices===void 0?void 0:_analytics$devices.map(item=>item._id))||[],datasets:[{label:'Devices',data:((_analytics$devices2=analytics.devices)===null||_analytics$devices2===void 0?void 0:_analytics$devices2.map(item=>item.count))||[],backgroundColor:['rgba(255, 99, 132, 0.7)','rgba(54, 162, 235, 0.7)','rgba(255, 206, 86, 0.7)']}]};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold mb-4\",children:[\"Analytics for: \",(_analytics$url=analytics.url)===null||_analytics$url===void 0?void 0:_analytics$url.shortUrl]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:\"Clicks Over Time\"}),/*#__PURE__*/_jsx(Line,{data:clicksOverTimeData})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded shadow\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-2\",children:\"Devices\"}),/*#__PURE__*/_jsx(Pie,{data:devicesData})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded shadow\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-semibold mb-4\",children:[\"Recent Clicks (\",analytics.totalClicks,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"text-left p-2\",children:\"Timestamp\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left p-2\",children:\"IP Address\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left p-2\",children:\"Device\"}),/*#__PURE__*/_jsx(\"th\",{className:\"text-left p-2\",children:\"Browser\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:(_analytics$clicks=analytics.clicks)===null||_analytics$clicks===void 0?void 0:_analytics$clicks.map(click=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-t\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:new Date(click.timestamp).toLocaleString()}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:click.ipAddress}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:click.deviceType}),/*#__PURE__*/_jsx(\"td\",{className:\"p-2\",children:click.browser})]},click._id))})]})})]})]});}export default Analytics;","map":{"version":3,"names":["React","useEffect","useParams","useDispatch","useSelector","getAnalytics","Bar","Line","Pie","jsx","_jsx","jsxs","_jsxs","Analytics","_analytics$clicksOver","_analytics$clicksOver2","_analytics$devices","_analytics$devices2","_analytics$url","_analytics$clicks","urlCode","dispatch","analytics","isLoading","state","url","children","clicksOverTimeData","labels","clicksOverTime","map","item","_id","datasets","label","data","count","borderColor","backgroundColor","devicesData","devices","className","shortUrl","totalClicks","clicks","click","Date","timestamp","toLocaleString","ipAddress","deviceType","browser"],"sources":["C:/Users/divya/url-shortener/client/src/pages/Analytics.js"],"sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { getAnalytics } from '../features/url/urlSlice';\r\nimport { Bar, Line, Pie } from 'react-chartjs-2';\r\n\r\nfunction Analytics() {\r\n  const { urlCode } = useParams();\r\n  const dispatch = useDispatch();\r\n  const { analytics, isLoading } = useSelector((state) => state.url);\r\n\r\n  useEffect(() => {\r\n    dispatch(getAnalytics(urlCode));\r\n  }, [dispatch, urlCode]);\r\n\r\n  if (isLoading) return <div>Loading analytics...</div>;\r\n  if (!analytics) return <div>No analytics data found</div>;\r\n\r\n  // Prepare chart data\r\n  const clicksOverTimeData = {\r\n    labels: analytics.clicksOverTime?.map(item => item._id) || [],\r\n    datasets: [{\r\n      label: 'Clicks',\r\n      data: analytics.clicksOverTime?.map(item => item.count) || [],\r\n      borderColor: 'rgb(75, 192, 192)',\r\n      backgroundColor: 'rgba(75, 192, 192, 0.2)'\r\n    }]\r\n  };\r\n\r\n  const devicesData = {\r\n    labels: analytics.devices?.map(item => item._id) || [],\r\n    datasets: [{\r\n      label: 'Devices',\r\n      data: analytics.devices?.map(item => item.count) || [],\r\n      backgroundColor: [\r\n        'rgba(255, 99, 132, 0.7)',\r\n        'rgba(54, 162, 235, 0.7)',\r\n        'rgba(255, 206, 86, 0.7)'\r\n      ]\r\n    }]\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-4\">\r\n      <h1 className=\"text-2xl font-bold mb-4\">Analytics for: {analytics.url?.shortUrl}</h1>\r\n      \r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8\">\r\n        <div className=\"bg-white p-4 rounded shadow\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Clicks Over Time</h2>\r\n          <Line data={clicksOverTimeData} />\r\n        </div>\r\n        <div className=\"bg-white p-4 rounded shadow\">\r\n          <h2 className=\"text-xl font-semibold mb-2\">Devices</h2>\r\n          <Pie data={devicesData} />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"bg-white p-4 rounded shadow\">\r\n        <h2 className=\"text-xl font-semibold mb-4\">Recent Clicks ({analytics.totalClicks})</h2>\r\n        <div className=\"overflow-x-auto\">\r\n          <table className=\"min-w-full\">\r\n            <thead>\r\n              <tr>\r\n                <th className=\"text-left p-2\">Timestamp</th>\r\n                <th className=\"text-left p-2\">IP Address</th>\r\n                <th className=\"text-left p-2\">Device</th>\r\n                <th className=\"text-left p-2\">Browser</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {analytics.clicks?.map((click) => (\r\n                <tr key={click._id} className=\"border-t\">\r\n                  <td className=\"p-2\">{new Date(click.timestamp).toLocaleString()}</td>\r\n                  <td className=\"p-2\">{click.ipAddress}</td>\r\n                  <td className=\"p-2\">{click.deviceType}</td>\r\n                  <td className=\"p-2\">{click.browser}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Analytics;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}