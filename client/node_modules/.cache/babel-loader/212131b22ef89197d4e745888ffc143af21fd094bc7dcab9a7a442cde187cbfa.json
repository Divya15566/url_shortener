{"ast":null,"code":"import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\n// Async thunks\nexport const getMyUrls = createAsyncThunk('url/getMyUrls', async (_, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await axios.get('/api/url/myurls', {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    });\n    return response.data || [];\n  } catch (err) {\n    var _err$response, _err$response$data, _err$response2;\n    toast.error(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Failed to fetch URLs');\n    return rejectWithValue((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data);\n  }\n});\nexport const shortenUrl = createAsyncThunk('url/shortenUrl', async (urlData, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await axios.post('/api/url/shorten', urlData, {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    });\n    return response.data;\n  } catch (err) {\n    var _err$response3, _err$response3$data, _err$response4;\n    toast.error(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.error) || 'Failed to shorten URL');\n    return rejectWithValue((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : _err$response4.data);\n  }\n});\nexport const getAnalytics = createAsyncThunk('url/getAnalytics', async (urlCode, {\n  getState,\n  rejectWithValue\n}) => {\n  try {\n    const {\n      auth\n    } = getState();\n    const response = await axios.get(`/api/analytics/${urlCode}`, {\n      headers: {\n        Authorization: `Bearer ${auth.token}`\n      }\n    });\n    return response.data;\n  } catch (err) {\n    var _err$response5, _err$response5$data, _err$response6;\n    toast.error(((_err$response5 = err.response) === null || _err$response5 === void 0 ? void 0 : (_err$response5$data = _err$response5.data) === null || _err$response5$data === void 0 ? void 0 : _err$response5$data.error) || 'Failed to get analytics');\n    return rejectWithValue((_err$response6 = err.response) === null || _err$response6 === void 0 ? void 0 : _err$response6.data);\n  }\n});\n\n// Slice\nconst urlSlice = createSlice({\n  name: 'url',\n  initialState: {\n    urls: [],\n    analytics: null,\n    isLoading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: builder => {\n    builder\n    // Get My URLs\n    .addCase(getMyUrls.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getMyUrls.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.urls = action.payload;\n    }).addCase(getMyUrls.rejected, (state, action) => {\n      var _action$payload;\n      state.isLoading = false;\n      state.error = (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.error;\n    })\n\n    // Shorten URL\n    .addCase(shortenUrl.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(shortenUrl.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.urls.push(action.payload);\n    }).addCase(shortenUrl.rejected, (state, action) => {\n      var _action$payload2;\n      state.isLoading = false;\n      state.error = (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.error;\n    })\n\n    // Get Analytics\n    .addCase(getAnalytics.pending, state => {\n      state.isLoading = true;\n      state.error = null;\n    }).addCase(getAnalytics.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.analytics = action.payload;\n    }).addCase(getAnalytics.rejected, (state, action) => {\n      var _action$payload3;\n      state.isLoading = false;\n      state.error = (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.error;\n    });\n  }\n});\nexport default urlSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","toast","getMyUrls","_","getState","rejectWithValue","auth","response","get","headers","Authorization","token","data","err","_err$response","_err$response$data","_err$response2","error","shortenUrl","urlData","post","_err$response3","_err$response3$data","_err$response4","getAnalytics","urlCode","_err$response5","_err$response5$data","_err$response6","urlSlice","name","initialState","urls","analytics","isLoading","reducers","extraReducers","builder","addCase","pending","state","fulfilled","action","payload","rejected","_action$payload","push","_action$payload2","_action$payload3","reducer"],"sources":["C:/Users/divya/url-shortener/client/src/features/url/urlSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from '@reduxjs/toolkit';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\n// Async thunks\r\nexport const getMyUrls = createAsyncThunk(\r\n  'url/getMyUrls',\r\n  async (_, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { auth } = getState();\r\n      const response = await axios.get('/api/url/myurls', {\r\n        headers: {\r\n          Authorization: `Bearer ${auth.token}`\r\n        }\r\n      });\r\n      return response.data || [];\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.error || 'Failed to fetch URLs');\r\n      return rejectWithValue(err.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const shortenUrl = createAsyncThunk(\r\n  'url/shortenUrl',\r\n  async (urlData, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { auth } = getState();\r\n      const response = await axios.post('/api/url/shorten', urlData, {\r\n        headers: {\r\n          Authorization: `Bearer ${auth.token}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.error || 'Failed to shorten URL');\r\n      return rejectWithValue(err.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\nexport const getAnalytics = createAsyncThunk(\r\n  'url/getAnalytics',\r\n  async (urlCode, { getState, rejectWithValue }) => {\r\n    try {\r\n      const { auth } = getState();\r\n      const response = await axios.get(`/api/analytics/${urlCode}`, {\r\n        headers: {\r\n          Authorization: `Bearer ${auth.token}`\r\n        }\r\n      });\r\n      return response.data;\r\n    } catch (err) {\r\n      toast.error(err.response?.data?.error || 'Failed to get analytics');\r\n      return rejectWithValue(err.response?.data);\r\n    }\r\n  }\r\n);\r\n\r\n// Slice\r\nconst urlSlice = createSlice({\r\n  name: 'url',\r\n  initialState: {\r\n    urls: [],\r\n    analytics: null,\r\n    isLoading: false,\r\n    error: null\r\n  },\r\n  reducers: {},\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Get My URLs\r\n      .addCase(getMyUrls.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getMyUrls.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.urls = action.payload;\r\n      })\r\n      .addCase(getMyUrls.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload?.error;\r\n      })\r\n      \r\n      // Shorten URL\r\n      .addCase(shortenUrl.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(shortenUrl.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.urls.push(action.payload);\r\n      })\r\n      .addCase(shortenUrl.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload?.error;\r\n      })\r\n      \r\n      // Get Analytics\r\n      .addCase(getAnalytics.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(getAnalytics.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.analytics = action.payload;\r\n      })\r\n      .addCase(getAnalytics.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.error = action.payload?.error;\r\n      });\r\n  }\r\n});\r\n\r\nexport default urlSlice.reducer;\r\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAChE,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,KAAK,QAAQ,gBAAgB;;AAEtC;AACA,OAAO,MAAMC,SAAS,GAAGH,gBAAgB,CACvC,eAAe,EACf,OAAOI,CAAC,EAAE;EAAEC,QAAQ;EAAEC;AAAgB,CAAC,KAAK;EAC1C,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAGF,QAAQ,CAAC,CAAC;IAC3B,MAAMG,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,iBAAiB,EAAE;MAClDC,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,IAAI,CAACK,KAAK;MACrC;IACF,CAAC,CAAC;IACF,OAAOJ,QAAQ,CAACK,IAAI,IAAI,EAAE;EAC5B,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAC,aAAA,EAAAC,kBAAA,EAAAC,cAAA;IACZf,KAAK,CAACgB,KAAK,CAAC,EAAAH,aAAA,GAAAD,GAAG,CAACN,QAAQ,cAAAO,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcF,IAAI,cAAAG,kBAAA,uBAAlBA,kBAAA,CAAoBE,KAAK,KAAI,sBAAsB,CAAC;IAChE,OAAOZ,eAAe,EAAAW,cAAA,GAACH,GAAG,CAACN,QAAQ,cAAAS,cAAA,uBAAZA,cAAA,CAAcJ,IAAI,CAAC;EAC5C;AACF,CACF,CAAC;AAED,OAAO,MAAMM,UAAU,GAAGnB,gBAAgB,CACxC,gBAAgB,EAChB,OAAOoB,OAAO,EAAE;EAAEf,QAAQ;EAAEC;AAAgB,CAAC,KAAK;EAChD,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAGF,QAAQ,CAAC,CAAC;IAC3B,MAAMG,QAAQ,GAAG,MAAMP,KAAK,CAACoB,IAAI,CAAC,kBAAkB,EAAED,OAAO,EAAE;MAC7DV,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,IAAI,CAACK,KAAK;MACrC;IACF,CAAC,CAAC;IACF,OAAOJ,QAAQ,CAACK,IAAI;EACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAQ,cAAA,EAAAC,mBAAA,EAAAC,cAAA;IACZtB,KAAK,CAACgB,KAAK,CAAC,EAAAI,cAAA,GAAAR,GAAG,CAACN,QAAQ,cAAAc,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcT,IAAI,cAAAU,mBAAA,uBAAlBA,mBAAA,CAAoBL,KAAK,KAAI,uBAAuB,CAAC;IACjE,OAAOZ,eAAe,EAAAkB,cAAA,GAACV,GAAG,CAACN,QAAQ,cAAAgB,cAAA,uBAAZA,cAAA,CAAcX,IAAI,CAAC;EAC5C;AACF,CACF,CAAC;AAED,OAAO,MAAMY,YAAY,GAAGzB,gBAAgB,CAC1C,kBAAkB,EAClB,OAAO0B,OAAO,EAAE;EAAErB,QAAQ;EAAEC;AAAgB,CAAC,KAAK;EAChD,IAAI;IACF,MAAM;MAAEC;IAAK,CAAC,GAAGF,QAAQ,CAAC,CAAC;IAC3B,MAAMG,QAAQ,GAAG,MAAMP,KAAK,CAACQ,GAAG,CAAC,kBAAkBiB,OAAO,EAAE,EAAE;MAC5DhB,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUJ,IAAI,CAACK,KAAK;MACrC;IACF,CAAC,CAAC;IACF,OAAOJ,QAAQ,CAACK,IAAI;EACtB,CAAC,CAAC,OAAOC,GAAG,EAAE;IAAA,IAAAa,cAAA,EAAAC,mBAAA,EAAAC,cAAA;IACZ3B,KAAK,CAACgB,KAAK,CAAC,EAAAS,cAAA,GAAAb,GAAG,CAACN,QAAQ,cAAAmB,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAcd,IAAI,cAAAe,mBAAA,uBAAlBA,mBAAA,CAAoBV,KAAK,KAAI,yBAAyB,CAAC;IACnE,OAAOZ,eAAe,EAAAuB,cAAA,GAACf,GAAG,CAACN,QAAQ,cAAAqB,cAAA,uBAAZA,cAAA,CAAchB,IAAI,CAAC;EAC5C;AACF,CACF,CAAC;;AAED;AACA,MAAMiB,QAAQ,GAAG/B,WAAW,CAAC;EAC3BgC,IAAI,EAAE,KAAK;EACXC,YAAY,EAAE;IACZC,IAAI,EAAE,EAAE;IACRC,SAAS,EAAE,IAAI;IACfC,SAAS,EAAE,KAAK;IAChBjB,KAAK,EAAE;EACT,CAAC;EACDkB,QAAQ,EAAE,CAAC,CAAC;EACZC,aAAa,EAAGC,OAAO,IAAK;IAC1BA;IACE;IAAA,CACCC,OAAO,CAACpC,SAAS,CAACqC,OAAO,EAAGC,KAAK,IAAK;MACrCA,KAAK,CAACN,SAAS,GAAG,IAAI;MACtBM,KAAK,CAACvB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDqB,OAAO,CAACpC,SAAS,CAACuC,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MAC/CF,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACR,IAAI,GAAGU,MAAM,CAACC,OAAO;IAC7B,CAAC,CAAC,CACDL,OAAO,CAACpC,SAAS,CAAC0C,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MAAA,IAAAG,eAAA;MAC9CL,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACvB,KAAK,IAAA4B,eAAA,GAAGH,MAAM,CAACC,OAAO,cAAAE,eAAA,uBAAdA,eAAA,CAAgB5B,KAAK;IACrC,CAAC;;IAED;IAAA,CACCqB,OAAO,CAACpB,UAAU,CAACqB,OAAO,EAAGC,KAAK,IAAK;MACtCA,KAAK,CAACN,SAAS,GAAG,IAAI;MACtBM,KAAK,CAACvB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDqB,OAAO,CAACpB,UAAU,CAACuB,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MAChDF,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACR,IAAI,CAACc,IAAI,CAACJ,MAAM,CAACC,OAAO,CAAC;IACjC,CAAC,CAAC,CACDL,OAAO,CAACpB,UAAU,CAAC0B,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MAAA,IAAAK,gBAAA;MAC/CP,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACvB,KAAK,IAAA8B,gBAAA,GAAGL,MAAM,CAACC,OAAO,cAAAI,gBAAA,uBAAdA,gBAAA,CAAgB9B,KAAK;IACrC,CAAC;;IAED;IAAA,CACCqB,OAAO,CAACd,YAAY,CAACe,OAAO,EAAGC,KAAK,IAAK;MACxCA,KAAK,CAACN,SAAS,GAAG,IAAI;MACtBM,KAAK,CAACvB,KAAK,GAAG,IAAI;IACpB,CAAC,CAAC,CACDqB,OAAO,CAACd,YAAY,CAACiB,SAAS,EAAE,CAACD,KAAK,EAAEE,MAAM,KAAK;MAClDF,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACP,SAAS,GAAGS,MAAM,CAACC,OAAO;IAClC,CAAC,CAAC,CACDL,OAAO,CAACd,YAAY,CAACoB,QAAQ,EAAE,CAACJ,KAAK,EAAEE,MAAM,KAAK;MAAA,IAAAM,gBAAA;MACjDR,KAAK,CAACN,SAAS,GAAG,KAAK;MACvBM,KAAK,CAACvB,KAAK,IAAA+B,gBAAA,GAAGN,MAAM,CAACC,OAAO,cAAAK,gBAAA,uBAAdA,gBAAA,CAAgB/B,KAAK;IACrC,CAAC,CAAC;EACN;AACF,CAAC,CAAC;AAEF,eAAeY,QAAQ,CAACoB,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}